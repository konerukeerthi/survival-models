---
title: "survival lecture 2"
author: "Steve Simon"
date: "April 8, 2018"
output: html_document
---

This file does not need any special libraries other than the ones listed below. Many of the data sets in this program use data from Hosmer, Lemeshow, and May. I made one minor change, however, which was to force all the variable names to lower case.

```{r load-libraries}
library(broom)
library(dplyr)
library(ggplot2)
library(magrittr)
library(survival)
library(tidyr)
```

## Fruit fly data (round 1)

The fly1 data set is intended to illustrate how easy it would be for you to estimate a survival curve if you had no censoring. For a brief overview of this data, refer to data-dictionary-fly1in the doc folder.

To get the program to work properly, you need a variable that equals one for every observation, since every observation represents a time at death rather than a censoring time.

```{r read-fly1}
fn <- "~/survival-models/data/fly1.txt"
fly1 <- read.table(fn, header=FALSE)
names(fly1) <- "time"
print(fly1)
fly1$censor <- 1
fly1_surv <- Surv(fly1$time, fly1$censor)
fly1_km <- survfit(fly1_surv~1)
print(fly1_km)
plot(fly1_km, conf.int=FALSE)
```

Save everything for possible re-use.

```{r save-everything}
save.image("~/survival-models/bin/survival-lecture-2.RData")
```