---
title: "survival lecture 3"
author: "Steve Simon"
date: "April 8, 2018"
output: html_document
---

Lecture 3. Planning and data management issues for survival data. Planning a study with a survival outcome requires you to specify both the number of patients and the duration of follow-up time. You’ll compute power for hypothetical studies and compare power across different research designs. Then you’ll review the data management needs of a survival study, with a special emphasis on the problems associated with date variables.

This file does not need any special libraries other than the ones listed below. Many of the data sets in this program use data from Hosmer, Lemeshow, and May. I made one minor change, however, which was to force all the variable names to lower case.

```{r load-libraries}
library(broom)
library(dplyr)
library(ggplot2)
library(magrittr)
library(survival)
library(tidyr)
```

## Date manipulations in R

R stores dates as the number of days since January 1, 1970.

```{r date-manipulations}
baseline <- as.Date("1/1/1970", format="%m/%d/%Y")
print(baseline)
print(as.numeric(baseline))
```

## Date differences

Start date: when therapy was initiated or when disease first appeared. This can be tricky.

Death date or event date: This will be missing values for any censored observation.

Date of last follow up.

Choose maximum of death/last followup. Set censor to 0 if death date is missing, 1 otherwise.

## Sample size justification

Hosmer, Lemeshow, and May discuss power calculations starting on page 340.

Also mention how number of events dominates power calculation and how you want 25 to 50 events in each group.

Save everything for possible later re-use.


```{r save-everything}
save.image("~/survival-models/bin/survival-lecture-3.RData")
```